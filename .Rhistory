table(dh_edu$ramo)
x <- c("EDUC.", "EDUCACIÓN", "UNIVERSIDAD", "SECUNDARIA", "POLITECNICO", "TELESECUNDARIA", "INSTITUTO TECNOLOGICO SUPERIOR")
dh_edu <- dh %>% filter(str_detect(ramo, x[1]) |
str_detect(ramo, x[2]) |
str_detect(ramo, x[3]) |
str_detect(ramo, x[4]) |
str_detect(ramo, x[5]) |
str_detect(ramo, x[6]) |
str_detect(ramo, x[7]))
table(dh_edu$ramo)
mean(dh_edu$sueldo_iss)
sd(dh_edu$sueldo_iss)
boxplot(dh_edu$sueldo_iss)
names(dh_edu)
mean(dh_edu$mult_sdo_i)
mean(dh_edu$sueldo_iss)*mean(dh_edu$mult_sdo_i)
names(dh)
table(dh_edu$num_ramo)
table(dh_edu$mod_cve)
table(dh$mod_cve)
dh_antes2018 <- dh %>% filter(fecha_ingr<2008)
head(dh$fecha_ingr)
class(dh$fecha_ingr[1])
as.Date.factor(dh$fecha_ingr[1])
dh_antes2018 <- dh %>% filter(fecha_ingr<"01/01/2008")
dh_antes2018 <- dh %>% filter(fecha_ingr<01/01/2008)
as.Date(dh$fecha_ingr[1])
dh$anio_ingreso <- dh %>% substr(fecha_ing, 7, 10)
dh$anio_ingreso <- dh %>% substr(fecha_ing, start=7, stop=10)
dh$anio_ingreso <- substr(dh$fecha_ingr, start=7, stop=10)
head(dh$anio_ingreso)
dh_antes2008 <- dh %>% filter(as.integer(anio_ingreso)<2008)
table(dh_antes2008$mod_cve)
table(dh$anio_ingreso)
dh_antes1972 <- dh %>% filter(as.integer(anio_ingreso)<1972)
View(dh_antes1972)
mean(dh_antes2008$antig)
dh$anio_ingreso <- as.integer(substr(dh$fecha_ingr, start=7, stop=10))
class(dh$anio_ingreso)
# Código
libro_codigo <- read.csv("http://www.issste.gob.mx/datosabiertos/d_activos.csv")
setwd("C:/Users/osska/OneDrive/Documentos")
getwd()
setwd("C:/Users/osska/OneDrive/Documentos/GitHub")
getwd()
setwd("C:\Users\osska\OneDrive\Documentos\GitHub")
setwd("C:\\Users\\osska\\OneDrive\\Documentos\\GitHub")
setwd("C:/Users/oskka/OneDrive/Documentos/GitHub/Fertility")
library(dplyr)
#Función 2 para obtener los registros tardíos en los 10 años siguientes
registro_tardio <- function(){
year <- c(1985:1985)
for (y in year){
nombre <- paste0("X", (y))
for (i in 1:10){
myfile <- paste0("bin/Registro_", i + y, "_Nac_anterior.csv")
df <- read.csv(myfile)
if (i == 1){
# Registro del año siguiente
tabla <- df %>% select(SEXO, EDAD_MADN, nombre)
names(tabla) <- c("SEXO", "EDAD_MADN", as.character(i + y))
}else{
# Registro de los años subsiguientes
tabla_i <- df %>% select(SEXO, EDAD_MADN, nombre)
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(i + y))
tabla <- merge(tabla, tabla_i, by = c("SEXO", "EDAD_MADN"))
} #Fin If / Else
write.csv(tabla, paste0("Registros_tardíos_Nac_", y, ".csv"))
#total_i <- apply(tabla[,3:12], 1, sum)
} #Fin loop i
#if (y == 1){
#total <- merge(tabla[,1:2], total_i)
#}else{
# total <- merge(total, total_i)
#} # Fin if / else
} # Fin loop y
return()
} # Fin de Función
ver <- registro_tardio()
#Función 2 para obtener los registros tardíos en los 10 años siguientes
registro_tardio <- function(){
year <- c(1985:1985)
for (y in year){
nombre <- paste0("X", (y))
for (i in 1:10){
myfile <- paste0("bin/Registro_", i + y, "_Nac_anterior.csv")
df <- read.csv(myfile)
if (i == 1){
# Registro del año siguiente
tabla <- df %>% select(SEXO, EDAD_MADN, y)
names(tabla) <- c("SEXO", "EDAD_MADN", as.character(i + y))
}else{
# Registro de los años subsiguientes
tabla_i <- df %>% select(SEXO, EDAD_MADN, y)
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(i + y))
tabla <- merge(tabla, tabla_i, by = c("SEXO", "EDAD_MADN"))
} #Fin If / Else
write.csv(tabla, paste0("Registros_tardíos_Nac_", y, ".csv"))
#total_i <- apply(tabla[,3:12], 1, sum)
} #Fin loop i
#if (y == 1){
#total <- merge(tabla[,1:2], total_i)
#}else{
# total <- merge(total, total_i)
#} # Fin if / else
} # Fin loop y
return()
} # Fin de Función
ver <- registro_tardio()
#Función 2 para obtener los registros tardíos en los 10 años siguientes
registro_tardio <- function(){
year <- c(1985:1985)
for (y in year){
nombre <- paste0("X", (y))
for (i in 1:10){
myfile <- paste0("bin/Registro_", i + y, "_Nac_anterior.csv")
df <- read.csv(myfile)
if (i == 1){
# Registro del año siguiente
tabla <- df %>% select(SEXO, EDAD_MADN, y)
names(tabla) <- c("SEXO", "EDAD_MADN", as.character(i + y))
}else{
# Registro de los años subsiguientes
tabla_i <- df %>% select(SEXO, EDAD_MADN, y)
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(i + y))
tabla <- merge(tabla, tabla_i, by = c("SEXO", "EDAD_MADN"))
} #Fin If / Else
write.csv(tabla, paste0("Registros_tardíos_Nac_", y, ".csv"))
#total_i <- apply(tabla[,3:12], 1, sum)
} #Fin loop i
#if (y == 1){
#total <- merge(tabla[,1:2], total_i)
#}else{
# total <- merge(total, total_i)
#} # Fin if / else
} # Fin loop y
return(tabla)
} # Fin de Función
ver <- registro_tardio()
#Función 2 para obtener los registros tardíos en los 10 años siguientes
registro_tardio <- function(){
year <- c(1985:1985)
for (y in year){
nombre <- paste0("X", (y))
for (i in 1:10){
myfile <- paste0("bin/Registro_", i + y, "_Nac_anterior.csv")
df <- read.csv(myfile)
if (i == 1){
# Registro del año siguiente
tabla <- df %>% select(SEXO, EDAD_MADN, as.character(y))
names(tabla) <- c("SEXO", "EDAD_MADN", as.character(i + y))
}else{
# Registro de los años subsiguientes
tabla_i <- df %>% select(SEXO, EDAD_MADN, y)
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(i + y))
tabla <- merge(tabla, tabla_i, by = c("SEXO", "EDAD_MADN"))
} #Fin If / Else
write.csv(tabla, paste0("Registros_tardíos_Nac_", y, ".csv"))
#total_i <- apply(tabla[,3:12], 1, sum)
} #Fin loop i
#if (y == 1){
#total <- merge(tabla[,1:2], total_i)
#}else{
# total <- merge(total, total_i)
#} # Fin if / else
} # Fin loop y
return(tabla)
} # Fin de Función
ver <- registro_tardio()
#Función 2 para obtener los registros tardíos en los 10 años siguientes
registro_tardio <- function(){
year <- c(1985:1985)
for (y in year){
nombre <- paste0("X", (y))
for (i in 1:10){
myfile <- paste0("bin/Registro_", i + y, "_Nac_anterior.csv")
df <- read.csv(myfile)
if (i == 1){
# Registro del año siguiente
tabla <- df %>% select(SEXO, EDAD_MADN, nombre)
names(tabla) <- c("SEXO", "EDAD_MADN", as.character(i + y))
}else{
# Registro de los años subsiguientes
tabla_i <- df %>% select(SEXO, EDAD_MADN, y)
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(i + y))
tabla <- merge(tabla, tabla_i, by = c("SEXO", "EDAD_MADN"))
} #Fin If / Else
write.csv(tabla, paste0("Registros_tardíos_Nac_", y, ".csv"))
#total_i <- apply(tabla[,3:12], 1, sum)
} #Fin loop i
#if (y == 1){
#total <- merge(tabla[,1:2], total_i)
#}else{
# total <- merge(total, total_i)
#} # Fin if / else
} # Fin loop y
return(tabla)
} # Fin de Función
ver <- registro_tardio()
#Función 2 para obtener los registros tardíos en los 10 años siguientes
registro_tardio <- function(){
year <- c(1985:1985)
for (y in year){
nombre <- paste0("X", (y))
for (i in 1:10){
myfile <- paste0("bin/Registro_", i + y, "_Nac_anterior.csv")
df <- read.csv(myfile)
if (i == 1){
# Registro del año siguiente
tabla <- df %>% select(SEXO, EDAD_MADN, nombre)
names(tabla) <- c("SEXO", "EDAD_MADN", as.character(i + y))
}else{
# Registro de los años subsiguientes
tabla_i <- df %>% select(SEXO, EDAD_MADN, nombre)
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(i + y))
tabla <- merge(tabla, tabla_i, by = c("SEXO", "EDAD_MADN"))
} #Fin If / Else
write.csv(tabla, paste0("Registros_tardíos_Nac_", y, ".csv"))
#total_i <- apply(tabla[,3:12], 1, sum)
} #Fin loop i
#if (y == 1){
#total <- merge(tabla[,1:2], total_i)
#}else{
# total <- merge(total, total_i)
#} # Fin if / else
} # Fin loop y
return(tabla)
} # Fin de Función
ver <- registro_tardio()
View(ver)
getwd()
## TOTAL DE REGISTROS DE LOS NACIDOS EN UN AÑO
df <- read.csv("bin/Registros Tardíos/Registros_tardíos_Nac_2010.csv")
prueba <- apply(ver[,3:12], 1, sum)
View(df)
prueba <- apply(df[,3:12], 1, sum)
prueba
tot_reg <- function(){
for(y in 1985:1985){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:2]
registros <- apply(df[,3:12], 1, sum)
tabla1 <- merge(estructura, registros)
}
return(tabla1)
}
prueba <- tot_reg()
View(prueba)
tot_reg <- function(){
for(y in 1985:1985){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:2]
registros <- apply(df[,3:12], 1, sum)
tabla1 <- rbind(estructura, registros)
}
return(tabla1)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1985){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:2]
registros <- apply(df[,3:12], 1, sum)
tabla1 <- cbind(estructura, registros)
}
return(tabla1)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1985){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,3:12], 1, sum)
tabla1 <- cbind(estructura, registros)
}
return(tabla1)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1985){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
tabla1 <- cbind(estructura, registros)
}
return(tabla1)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1985){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1986){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:2012){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:2010){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1987){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1988){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1990){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1992){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1991){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,1:3]
registros <- apply(df[,4:13], 1, sum)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- cbind(tabla_i, registros)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:1991){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,2:3]
registros <- apply(df[,4:13], 1, sum)
tabla_1 <- cbind(estructura, registros)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- merge(tabla_i, tabla_1, by = c("SEXO", "EDAD_MADN"), all=T)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:2010){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,2:3]
registros <- apply(df[,4:13], 1, sum)
tabla_1 <- cbind(estructura, registros)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- merge(tabla_i, tabla_1, by = c("SEXO", "EDAD_MADN"), all=T)
}
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:2012){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,2:3]
registros <- apply(df[,4:13], 1, sum)
tabla_1 <- cbind(estructura, registros)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- merge(tabla_i, tabla_1, by = c("SEXO", "EDAD_MADN"), all=T)
}
names(as.character(1985:2012))
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:2012){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,2:3]
registros <- apply(df[,4:13], 1, sum)
tabla_1 <- cbind(estructura, registros)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- merge(tabla_i, tabla_1, by = c("SEXO", "EDAD_MADN"), all=T)
}
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(1985:2012))
}
return(tabla_i)
}
prueba <- tot_reg()
tot_reg <- function(){
for(y in 1985:2012){
nombre <- paste0("bin/Registros Tardíos/Registros_tardíos_Nac_", y, ".csv")
df <- read.csv(nombre)
estructura <- df[,2:3]
registros <- apply(df[,4:13], 1, sum)
tabla_1 <- cbind(estructura, registros)
if (y == 1985){
tabla_i <- cbind(estructura, registros)
}else{
tabla_i <- merge(tabla_i, tabla_1, by = c("SEXO", "EDAD_MADN"), all=T)
}
}
names(tabla_i) <- c("SEXO", "EDAD_MADN", as.character(1985:2012))
return(tabla_i)
}
prueba <- tot_reg()
write.csv(prueba, "bin/Registros tardíos/Total_Registros_Tardíos_x_Ano_Nacim.csv")
